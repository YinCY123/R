define(['require','js/lib/jquery','js/util/clz','js/util/getNodes','js/component/common/layer','userpanel','js/util/placeholder','js/util/throttleDebounce'],function(require){var a=require("js/lib/jquery"),c=require("js/util/clz"),v=require("js/util/getNodes"),h=(require("js/component/common/layer"),require("userpanel"),require("js/util/placeholder")),C=require("js/util/throttleDebounce"),b=new c;return b.include({init:function(a){var c=this;c.dom=v(a),c.data("init")||c.bind()},bind:function(){var c=this.dom,v=function(){var v="search-open",h="search-active",b=function(a,c){window.ActiveXObject?a.onpropertychange=c:a.addEventListener("input",c,!1)},j=function(){var v=c.input,h=a.trim(v.val()),C=v.attr("placeholder");return!h||h===C},k=C.debounce(100,!1,function(){j()?c.extra.removeClass(h):c.extra.addClass(h)});c.btn.on("click",function(e){c.extra.hasClass(v)?j()?(c.input.val(""),c.extra.removeClass(v)):c.form.submit():(c.extra.addClass(v),c.input.focus()),k(),e.preventDefault(),e.stopPropagation()}),c.input.on("click",function(e){e.stopPropagation()}),a("body").on("click",function(){c.extra.hasClass(v)&&(c.extra.removeClass(v),setTimeout(function(){c.extra.removeClass(h)},100))}),c.input.on("keydown",function(e){13==e.keyCode&&e.ctrlKey&&c.form.submit()}),c.input.on("keyup",k),c.input.on("focus",k),b(c.input[0],k)},b=function(a,v){a[v+"Class"]("hover"),c.links[v+"Class"]("links-hover")};c.links.on("mouseover","li",function(){b(a(this),"add")}).on("mouseout","li",function(){b(a(this),"remove")}),h(c.input),v()}}),b});