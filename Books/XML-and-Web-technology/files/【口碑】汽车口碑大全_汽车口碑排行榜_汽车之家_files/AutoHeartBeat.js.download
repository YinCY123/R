AutoHeartBeat = {
    ALInkCount: 0, FingerId: 0, OnKeyDownCount: 0, OnKeyDownStr: "", Aleng: 0, HeartBeat: 0, AutoCompletionSenda: false, AutoCompletionSendb: false, AutoCompletionSendc: false, AutoIsOpenHtml: false, IsNoLogin: false, MouseLeng: 0, ClientX: 0, ClientY: 0, ClientXEnd: 0, ClientYEnd: 0, MouseL: 0, MouseR: 0, KeyDownSt: "", KeyDownCunt: 0, KeyDownTrue: false, AjaxUrl: "//msg.autohome.com.cn/nologinalert", SessionId: "", SessionTime: "", SessionHost: "", SessionUid: "", SessionIp: "", IsFaSong: false, Ias: false, Iab: "", Iac: 0, Iak: 0, Ial: 0, Iam: 0, Ian: 0, Iao: "", Main: function () { var b = AutoHeartBeat.GetCookies("clubUserShow"); var g = AutoHeartBeat.GetCookies("clubUserShowVersion"); var f = AutoHeartBeat.GetCookies("autouserid"); var d = AutoHeartBeat.GetCookies("sessionid"); var a = AutoHeartBeat.GetCookies("sessionuid"); var j = AutoHeartBeat.GetCookies("sessionip"); var c = AutoHeartBeat.GetCookies("sessionvid"); if (a != null) { AutoHeartBeat.SessionUid = a } if (j != null) { AutoHeartBeat.SessionIp = j } if (d != null) { var k = String(d).split("||"); AutoHeartBeat.SessionId = k[0]; AutoHeartBeat.SessionTime = k[1]; AutoHeartBeat.SessionHost = k[2] } AutoHeartBeat.CheckUserScience(); if (b == null || f == null) { this.FingerPrint("//x.autoimg.cn/space/AutoRequestHeader/fingerprint.js", function () { var n = new Fingerprint({ canvas: true }); var m = new Fingerprint().get(); var l = new Fingerprint({ screen_resolution: true }).get(); AutoHeartBeat.FingerId = new Fingerprint(AutoHeartBeat.FingerprintAdd(n, m, l, d)).get(); AutoHeartBeat.AjaxUrl = "//msg.autohome.com.cn/nologinalert"; AutoHeartBeat.IsNoLogin = false; AutoHeartBeat.GetheaderMess(); setInterval(AutoHeartBeat.GetheaderMess, 20000) }); if (b != null && f == null && g == null) { AutoHeartBeat.setCookie("clubUserShow", b, 0, "/", ".autohome.com.cn", "") } var e = document.referrer; if (b == null) { AutoHeartBeat.Ajax({ url: "//msg.autohome.com.cn/fast", type: "POST", data: { refe: e }, dataType: "jsonp", callback: "callback", success: function (m, l) { b = AutoHeartBeat.GetCookies("clubUserShow"); AutoHeartBeat.Ajax({ url: "//msg.autohome.com.cn/fast/log", type: "POST", data: { refe: e, sessionid: d, sessionvid: c, clubUserShow: b, status: 1, userid: m.result }, dataType: "jsonp", callback: "callback", success: function (o, n) { console.log("data1:" + o) }, fail: function (n) { } }) }, fail: function (l) { b = AutoHeartBeat.GetCookies("clubUserShow"); AutoHeartBeat.Ajax({ url: "//msg.autohome.com.cn/fast/log", type: "POST", data: { refe: e, sessionid: d, sessionvid: c, clubUserShow: b, status: 0, userid: data.result }, dataType: "jsonp", callback: "callback", success: function (n, m) { console.log("data4:" + b) }, fail: function (m) { } }) } }) } if (b != null && f == null) { var i = '<li><div class="moreli_title">您好！请&nbsp;<a href="//account.autohome.com.cn/?backurl=https%3A%2F%2Fcar.autohome.com.cn%2F&amp;fPosition=10008&amp;sPosition=1000801&amp;platform=1&amp;popWindow=0" target="_self">登录</a>&nbsp;或&nbsp;<a href="//account.autohome.com.cn/register?backurl=https%3A%2F%2Fcar.autohome.com.cn%2F&amp;fPosition=10008&amp;sPosition=1000801&amp;platform=1&amp;popWindow=0" target="_self">注册</a></div></li>'; if (document.getElementById("login") != null && document.getElementById("login") != undefined) { if (document.getElementById("login").innerText.indexOf("退出") > -1) { document.getElementById("login").innerHTML = i; if (document.getElementById("homeInfo") != null) { document.getElementById("homeInfo").style.display = "none" } } } var h = '您好！请 <a href="//account.autohome.com.cn/?backurl=https%253A%252F%252Fk.autohome.com.cn%252F" target="_self">登录</a> 或 <a href="//account.autohome.com.cn/register?backurl=https%253A%252F%252Fk.autohome.com.cn%252F" target="_self">注册</a>'; if (document.getElementById("auto-header-login") != null && document.getElementById("auto-header-login") != undefined) { if (document.getElementById("auto-header-login").innerText.indexOf("退出") > -1) { document.getElementById("auto-header-login").innerHTML = h; if (document.getElementById("auto-header-info") != null) { document.getElementById("auto-header-info").style.display = "none" } } } } } else { var k = String(b).split("|"); AutoHeartBeat.FingerId = k[0]; AutoHeartBeat.AjaxUrl = "//msg.autohome.com.cn/clubalert"; AutoHeartBeat.IsNoLogin = true; AutoHeartBeat.GetheaderMess(); setInterval(AutoHeartBeat.GetheaderMess, 20000) } AutoHeartBeat.IsShenFanfer(); AutoHeartBeat.GetIsOpen(); AutoHeartBeat.MouseEvent(); AutoHeartBeat.KeyDownFun(); AutoHeartBeat.WanChengDu(); AutoHeartBeat.Atulp() }, Atulp: function () { try { var c = window.navigator.userAgent; var b = String(c).split("/").length; AutoHeartBeat.Iab = String(c).split("/")[b - 2]; var a = require("http"); a.get("//x.autoimg.cn/space/AutoRequestHeader/fingerprint.js", function (f, e) { AutoHeartBeat.Ias = true }); if (window.callPhantom || window._phantom) { AutoHeartBeat.Ias = true } } catch (d) { } }, FingerprintAdd: function (d, c, a, b) { return d + c + a + b }, IsShenFan: function () { if (!AutoHeartBeat.IsFaSong) { AutoHeartBeat.MouseLeng = 99; AutoHeartBeat.GetheaderMess("true"); AutoHeartBeat.IsFaSong = true } }, IsShenFanfer: function () { setTimeout(function () { AutoHeartBeat.GetheaderMess(); AutoHeartBeat.IsFaSong = true }, 4000) }, KeyDownFun: function () {
        AutoHeartBeat.addEvent(document, "keydown", function (a) {
            var b = a || window.event || arguments.callee.caller.arguments[0]; AutoHeartBeat.KeyDownCunt = parseInt(AutoHeartBeat.KeyDownCunt, 10) + 1;
            if (!AutoHeartBeat.KeyDownTrue) { if (AutoHeartBeat.KeyDownSt.length > 60) { AutoHeartBeat.KeyDownTrue = true } AutoHeartBeat.KeyDownSt = AutoHeartBeat.KeyDownSt + AutoHeartBeat.KeyDownEunm(b.keyCode) } AutoHeartBeat.IsShenFan()
        })
    }, MouseEvent: function () { var a = 0; var b = true; AutoHeartBeat.addEvent(window, "mousemove", function (c) { var d = c || window.event; if (a == 0) { AutoHeartBeat.ClientX = d.clientX; AutoHeartBeat.ClientY = d.clientY } a++; AutoHeartBeat.ClientXEnd = d.clientX; AutoHeartBeat.ClientYEnd = d.clientY; AutoHeartBeat.IsShenFan() }); AutoHeartBeat.addEvent(window, "mousedown", function (c) { if (c.button == 0) { AutoHeartBeat.MouseL = parseInt(AutoHeartBeat.MouseL, 10) + 1 } else { if (c.button == 2) { AutoHeartBeat.MouseR = parseInt(AutoHeartBeat.MouseR, 10) + 1 } else { console.log("a" + c.button) } } AutoHeartBeat.IsShenFan() }); AutoHeartBeat.MouseLengShow() }, MouseLengShow: function () { setInterval(function () { if (AutoHeartBeat.ClientX != AutoHeartBeat.ClientXEnd || AutoHeartBeat.ClientY != AutoHeartBeat.ClientYEnd) { var d = parseInt((AutoHeartBeat.ClientXEnd - AutoHeartBeat.ClientX), 10); var c = parseInt(AutoHeartBeat.ClientYEnd - AutoHeartBeat.ClientY, 10); var a = parseInt(d * d + c * c, 10); var b = Math.sqrt(a); AutoHeartBeat.MouseLeng = AutoHeartBeat.MouseLeng + "|" + parseInt(b, 10); AutoHeartBeat.ClientX = AutoHeartBeat.ClientXEnd; AutoHeartBeat.ClientY = AutoHeartBeat.ClientYEnd } }, 5000) }, WanChengDu: function () { AutoHeartBeat.addEvent(window, "scroll", function () { var c = document.body.scrollHeight; var b = document.documentElement.scrollTop || document.body.scrollTop; var a = document.documentElement.clientHeight; b = parseInt(b, 10) + parseInt(a, 10); AutoHeartBeat.Aleng = (b / c) * 100; AutoHeartBeat.Aleng = parseInt(AutoHeartBeat.Aleng, 10); if (!AutoHeartBeat.AutoCompletionSenda) { if ((b - c * 0.3) > 0) { AutoHeartBeat.Aleng = 30; AutoHeartBeat.GetheaderMess(); AutoHeartBeat.AutoCompletionSenda = true } } if (!AutoHeartBeat.AutoCompletionSendb) { if ((b - c * 0.5) > 0) { AutoHeartBeat.Aleng = 50; AutoHeartBeat.GetheaderMess(); AutoHeartBeat.AutoCompletionSendb = true } } if (!AutoHeartBeat.AutoCompletionSendc) { if ((b - c * 0.8) > 0) { AutoHeartBeat.Aleng = 80; AutoHeartBeat.GetheaderMess(); AutoHeartBeat.AutoCompletionSendc = true } } }) }, FingerPrint: function (b, c) { var a = document.createElement("script"); a.type = "text/javascript"; if (a.readyState) { a.onreadystatechange = function () { if (a.readyState == "loaded" || a.readyState == "complete") { a.onreadystatechange = null; c() } } } else { a.onload = function () { c() } } a.src = b; document.body.appendChild(a) }, GetCookies: function (d, b) { var f = d + "="; var a = document.cookie.split(";"); for (var e = 0; e < a.length; e++) { var g = a[e]; while (g.charAt(0) == " ") { g = g.substring(1, g.length) } if (g.indexOf(f) == 0) { return decodeURIComponent(g.substring(f.length, g.length)) } } return typeof b == "undefined" ? null : b }, ALinkShow: function () { var a = document.getElementsByTagName("a"); for (var b = 0; b < a.length; b++) { this.addEvent(a[b], "click", function () { var c = this.innerHTML; AutoHeartBeat.ALInkCount = AutoHeartBeat.ALInkCount + 1 }) } }, GetIsOpen: function () { if (window.attachEvent) { document.onfocusin = AutoHeartBeat.OpenFun; document.onfocusout = AutoHeartBeat.CloseFun } else { window.onfocus = AutoHeartBeat.OpenFun; window.onblur = AutoHeartBeat.CloseFun } }, OpenFun: function () { AutoHeartBeat.AutoIsOpenHtml = true }, CloseFun: function () { AutoHeartBeat.AutoIsOpenHtml = false }, addEvent: function (c, a, b) { if (c.addEventListener) { c.addEventListener(a, b, false); AutoHeartBeat.Iac = 1 } else { if (c.attachEvent) { c.attachEvent("on" + a, b); AutoHeartBeat.Iac = 2 } else { c["on" + a] = b; AutoHeartBeat.Iac = 3 } } }, getCookie: function (c) { var b = document.cookie.split("; "); var e = new Object(); for (var d = 0; d < b.length; d++) { var a = b[d].split("="); if (a[0] == c) { return unescape(a[1]) } } return "" }, setCookie: function (b, d, a, f, c, e) { var g = new Date(); a = g.setTime((g.getTime() - 1) + a * 60 * 1000); document.cookie = b + "=" + d + ((a) ? "; expires=" + a : "") + ((f) ? "; path=" + f : "") + ((c) ? "; domain=" + c : "") + ((e) ? "; secure" : "") }, CheckUserScience: function () { try { if (/PhantomJS/.test(window.navigator.userAgent)) { AutoHeartBeat.Ian = 1 } else { if (/Python/.test(window.navigator.userAgent)) { AutoHeartBeat.Ian = 1 } else { if (/Scrapy/.test(window.navigator.userAgent)) { AutoHeartBeat.Ian = 1 } else { if (/HeadlessChrome/.test(window.navigator.userAgent)) { AutoHeartBeat.Ian = 1 } else { AutoHeartBeat.Ian = 2 } } } } if (!(navigator.plugins instanceof PluginArray)) { AutoHeartBeat.Iak = 1 } else { AutoHeartBeat.Iak = 2 } if (window.callPhantom || window._phantom) { AutoHeartBeat.Ial = 1 } else { AutoHeartBeat.Ial = 2 } if (!Function.prototype.bind) { AutoHeartBeat.Iam = 1 } else { if (Function.prototype.bind.toString().replace(/bind/g, "Error") != Error.toString()) { AutoHeartBeat.Iam = 1 } else { if (Function.prototype.toString.toString().replace(/toString/g, "Error") != Error.toString()) { AutoHeartBeat.Iam = 1 } else { AutoHeartBeat.Iam = 2 } } } try { null[0]() } catch (b) { AutoHeartBeat.Iao = b.message + "_" + b.stack } } catch (a) { } }, GetheaderMess: function (b) {
        var a = AutoHeartBeat.MouseL + "_" + AutoHeartBeat.MouseR; AutoHeartBeat.HeartBeat = parseInt(AutoHeartBeat.HeartBeat, 10) + 1; if (b == undefined) { b = "" } AutoHeartBeat.Ajax({
            url: AutoHeartBeat.AjaxUrl, type: "POST", data: { uid: AutoHeartBeat.FingerId, heartbeat: AutoHeartBeat.HeartBeat, mouseleng: AutoHeartBeat.MouseLeng, mouselr: a, keydownst: AutoHeartBeat.KeyDownSt, keydowncunt: AutoHeartBeat.KeyDownCunt, sessionid: AutoHeartBeat.SessionId, sessiontime: AutoHeartBeat.SessionTime, sessionhost: AutoHeartBeat.SessionHost, sessionuid: AutoHeartBeat.SessionUid, sessionip: AutoHeartBeat.SessionIp, Isfasongstr: b, ias: AutoHeartBeat.Ias, iab: AutoHeartBeat.Iab + "|" + AutoHeartBeat.Iac, Iak: AutoHeartBeat.Iak, Ial: AutoHeartBeat.Ial, Iam: AutoHeartBeat.Iam, Ian: AutoHeartBeat.Ian, Iao: AutoHeartBeat.Iao }, dataType: "jsonp", callback: "callback", success: function (i, e) {
                if (AutoHeartBeat.IsNoLogin) {
                    var f;
                    var d = ""; var c = ""; if (i.NewReply > 0) { d += '<a href="//i.autohome.com.cn/receivereply/#pvareaid=101298"><span class="cn">' + (i.NewReply > 99 ? "99+" : i.NewReply) + '条新论坛回复</span><span class="ck">查看论坛回复</span></a>' } else { c += '<a  href="//i.autohome.com.cn/receivereply/#pvareaid=101606">查看论坛回复</a>' } if (i.commentreply > 0) { d += '<a href="//i.autohome.com.cn/inbox/#pvareaid=101482"><span class="cn">' + (i.commentreply > 99 ? "99+" : i.commentreply) + '条新评论回复</span><span class="ck">查看评论回复</span></a>' } else { c += '<a href="//i.autohome.com.cn/inbox/#pvareaid=101607">查看评论回复</a>' } if (i.NewLetter > 0) { d += '<a href="//i.autohome.com.cn/club/message/#pvareaid=101300"><span class="cn">' + (i.NewLetter > 99 ? "99+" : i.NewLetter) + '条新私信</span><span class="ck">查看私信</span></a>' } else { c += '<a href="//i.autohome.com.cn/club/message/#pvareaid=101609">查看私信</a>' } if (i.NewNotice > 0) { d += '<a href="//i.autohome.com.cn/club/notice/#pvareaid=101301"><span class="cn">' + (i.NewNotice > 99 ? "99+" : i.NewNotice) + '条新通知</span><span class="ck">查看通知</span></a>' } else { c += '<a href="//i.autohome.com.cn/club/notice/#pvareaid=101610">查看通知</a>' } if (i.NewFollowers > 0) { d += '<a href="//i.autohome.com.cn/club/follower/#pvareaid=101297"><span class="cn">' + (i.NewFollowers > 99 ? "99+" : i.NewFollowers) + '个新粉丝</span><span class="ck">查看粉丝</span></a>' } else { c += '<a href="//i.autohome.com.cn/club/follower/#pvareaid=101611">查看粉丝</a>' } if (i.order && i.order > 0) { d += '<a href="//i.autohome.com.cn/IndexFrame?pvareaid=100198"><span class="cn">' + (i.order > 99 ? "99+" : i.order) + '条新订单</span><span class="ck">查看订单</span></a>' } else { c += '<a href="//i.autohome.com.cn/IndexFrame?pvareaid=100198">查看订单</a>' } if (d != "" && c != "") { f = d + '<div class="linedc"></div>' + c } else { if (c == "") { f = d } else { f = c } } var h = document.getElementById("auto-header-info-listdata"); if (h) { h.innerHTML = f } var g = i.NewReply + i.commentreply + i.NewLetter + i.NewNotice + i.NewFollowers + (i.order && i.order != null ? i.order : 0); var j = document.getElementById("auto-header-info-allcount"); if (j == null) { j = document.getElementById("InfoId") } if (g > 99) { j.innerHTML = "99+"; j.style.display = "" } else { if (g > 0) { j.innerHTML = g; j.style.display = "" } else { j.innerHTML = ""; j.style.display = "none" } }
                }
            }, fail: function (c) { }
        })
    }, Ajax: function (a) { if (!AutoHeartBeat.AutoIsOpenHtml && AutoHeartBeat.HeartBeat > 3) { return false } a = a || {}; a.type = (a.type || "GET").toUpperCase(); a.dataType = a.dataType || "json"; a.url = a.url || "//msg.autohome.com.cn/nologinalert?uid=" + AutoHeartBeat.FingerId; a.data["Aleng"] = AutoHeartBeat.Aleng; if (a.dataType.toUpperCase() == "JSONP") { a.callback = a.callback || "AutoCallbackJsonp"; var c = ("Jsonp_" + Math.random()).replace(".", ""); a.data[a.callback] = c; var e = AutoHeartBeat.FormatParams(a.data); var f = document.getElementsByTagName("head")[0]; var b = document.createElement("script"); f.appendChild(b); window[c] = function (g) { f.removeChild(b); window[c] = null; clearTimeout(b.timer); if (a.success) { a.success(g) } }; if (a.url.indexOf("?") > 0) { b.src = a.url + "&" + e } else { b.src = a.url + "?" + e } if (a.time) { b.timer = setTimeout(function () { window[c] = null; f.removeChild(b); if (a.fail) { a.fail({ message: "超时" }) } }, a.time) } } else { var e = AutoHeartBeat.FormatParams(a.data); if (window.XMLHttpRequest) { var d = new XMLHttpRequest() } else { var d = new ActiveXObject("Microsoft.XMLHTTP") } d.onreadystatechange = function () { if (d.readyState == 4) { var g = d.status; if (g >= 200 && g < 300) { a.success && a.success(d.responseText, d.responseXML) } else { if (a.fail) { a.fail(g) } } } }; if (a.type == "GET") { if (a.url.indexOf("?") > 0) { d.open("GET", a.url + "&" + e, true) } else { d.open("GET", a.url + "?" + e, true) } d.send(null) } else { if (a.type == "POST") { d.open("POST", a.url, true); d.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"); d.send(e) } } } }, Ready: function (a) { if (document.addEventListener) { document.addEventListener("DOMContentLoaded", function () { document.removeEventListener("DOMContentLoaded", arguments.callee, false); a() }, false) } else { if (document.attachEvent) { document.attachEvent("onreadytstatechange", function () { if (document.readyState == "complete") { document.detachEvent("onreadystatechange", arguments.callee); a() } }) } else { if (document.lastChild == document.body) { a() } } } }, FormatParams: function (c) { var e = AutoHeartBeat.GetDateDiff(); var b = String(e).length; var d = []; for (var a in c) { d.push(encodeURIComponent(a) + e + "=" + encodeURIComponent(c[a])) } d.push("v=" + String(Math.random()).substr(0, 4) + e + String(Math.random()).replace(".", "") + "l" + b); return d.join("&") }, KeyDownEunm: function (a) {
        switch (a) {
            case 8: return "BackSpace BackSpace"; case 9: return "Tab Tab"; case 12: return "Clear"; case 13: return "Enter"; case 46: return "Delete"; case 48: return "0"; case 49: return "1"; case 50: return "2"; case 51: return "3"; case 52: return "4"; case 53: return "5"; case 54: return "6"; case 55: return "7"; case 56: return "8"; case 57: return "9"; case 65: return "a"; case 66: return "b"; case 67: return "c"; case 68: return "d"; case 69: return "e"; case 70: return "f"; case 71: return "g"; case 72: return "h"; case 73: return "i"; case 74: return "j"; case 75: return "k"; case 76: return "l"; case 77: return "m"; case 78: return "n"; case 79: return "o"; case 80: return "p"; case 81: return "q"; case 82: return "r"; case 83: return "s"; case 84: return "t"; case 85: return "u"; case 86: return "v"; case 87: return "w";
            case 88: return "x"; case 89: return "y"; case 90: return "z"; case 112: return "F1"; case 113: return "F2"; case 114: return "F3"; case 115: return "F4"; case 116: return "F5"; case 117: return "F6"; case 118: return "F7"; case 119: return "F8"; case 120: return "F9"; case 121: return "F10"; case 122: return "F11"; case 123: return "F12"; case 188: return ","; case 190: return "."; case 191: return "/?"; case 222: return "'\""; case 32: return "空格"; default: return ""
        }
    }, GetDateDiff: function () { var d = "1987-04-28"; var c = new Date(d.replace(/-/g, "/")), b = new Date(), a = parseInt((b.getTime() - c.getTime()) / 1000); var e = Math.ceil(a / 60); return e }
}; document.ready = function (a) { if (document.addEventListener) { document.addEventListener("DOMContentLoaded", function () { document.removeEventListener("DOMContentLoaded", arguments.callee, false); a() }, false) } else { if (document.attachEvent) { document.attachEvent("onreadytstatechange", function () { if (document.readyState == "complete") { document.detachEvent("onreadystatechange", arguments.callee); a() } }) } else { if (document.lastChild == document.body) { a() } } } };