(function () {
    function HashTable() {
        var size = 0;
        var entry = new Object();

        this.add = function (key, value) {
            //key=key.toLowerCase();value=value.toLowerCase();
            if (!this.containsKey(key)) {
                size++;
            } else {
                if (window["console"]) {
                    if (console && console.log) {
                        // console.log("existed(" + key + ":" + value + ")");
                    }
                }
            }
            entry[key] = value;
        }

        this.getValue = function (key) {
            key = key.toLowerCase();
            return this.containsKey(key) ? entry[key] : null;
        }

        this.remove = function (key) {
            if (this.containsKey(key) && (delete entry[key])) {
                size--;
            }
        }

        this.containsKey = function (key) {
            //key=key.toLowerCase();
            return (key in entry);
        }

        this.containsValue = function (value) {
            //value=value.toLowerCase();
            for (var prop in entry) {
                if (entry[prop] == value) {
                    return true;
                }
            }
            return false;
        }

        this.getValues = function () {
            var values = new Array();
            for (var prop in entry) {
                values.push(entry[prop]);
            }
            return values;
        }

        this.ByCheck = function (url, c) {
            var isM = this.isMobile();
            if (url.indexOf("iswww=www") != -1) {
                document.cookie = "iswww=www; path=/";
            }
            var isWWW = document.cookie.match(new RegExp("(^| )iswww=www(;|$)"));
            if (isWWW)
                return false;
            //var isM = true;
            var res = "";
            if (url != "") {
                if (isM) {
                    var r = this.getValue(url); res = r == null ? "" : r;
                    if (res != "") {
                        if (code === null) {
                            location.href = res;
                        } else {
                            res = res.replace("{0}", code);
                            if (dDate != null) {
                                res = res.replace("{1}", dDate);
                            }
                            if (sState != null) {
                                res = res.replace("{2}", sState);
                            }

                            location.href = res;
                        }
                    }
                }
            }
        }

        this.getKeys = function () {
            var keys = new Array();
            for (var prop in entry) {
                keys.push(prop);
            }
            return keys;
        }
        this.getSize = function () {
            return size;
        }
        this.clear = function () {
            size = 0;
            entry = new Object();
        }
        this.isMobile = function () {
            try {
                var __KEY = "has_jump_to_web";
                var __VALUE = document.cookie.match(new RegExp("(^| )" + __KEY + "=([^;]*)(;|$)"));
                if (__VALUE != null && unescape(__VALUE[2]) == "1") {
                    return false;//启用了web，不做后面的wap端验证
                }
            } catch (err) { }

            var ua = navigator.userAgent;
            var res = false;
            var ipad = ua.match(/(iPad).*OS\s([\d_]+)/),
                isIphone = !ipad && ua.match(/(iPhone\sOS)\s([\d_]+)/),
                isAndroid = ua.match(/(Android)\s+/) && ua.match(/(Mobile)\s+/),
                isMobile = isIphone || isAndroid;
            if (isMobile) {
                res = true;
            } else {
                res = false;
            }
            return res;
        }
        this.getMarket = function (StockCode) {
            var i = StockCode.substring(0, 1);
            var j = StockCode.substring(0, 3);
            if (i == "5" || i == "6" || i == "9") {
                return "01";
            } else {
                if (j == "009" || j == "126" || j == "110" || j == "201" || j == "202" || j == "203" || j == "204") {
                    return "01";
                } else {
                    return "02";
                }
            }
        }
        this.getMarket_zjlx = function (StockCode) {
            var i = StockCode.substring(0, 1);
            var j = StockCode.substring(0, 3);
            if (i == "5" || i == "6" || i == "9") {
                return "1";
            } else {
                if (j == "009" || j == "126" || j == "110" || j == "201" || j == "202" || j == "203" || j == "204") {
                    return "1";
                } else {
                    return "2";
                }
            }
        }
    }
    var domain = window.location.host;
    var map = new HashTable();
    var _location = document.scripts[document.scripts.length - 1].src;
    var _url = location.href.replace("http://" + domain, '');

    var code = (_url.match(/\d{5,}\./) != null) ? _url.match(/\d{5,}/)[0] : null;
    var riqi = (_url.match(/\/\d{5,}\//) != null) ? _url.match(/\d{5,}/)[0] : null;
    //匹配日期和stat
    var dDate = (_url.match(/\d{4}-\d{2}-\d{2}/) != null) ? _url.match(/\d{4}-\d{2}-\d{2}/)[0] : null;
    var sState = (_url.match(/\d{4}-\d{2}-\d{2}-\d{1}/) != null) ? _url.match(/\d{4}-\d{2}-\d{2}-\d{1}/)[0] : null;
    sState = sState != null ? sState.split('-')[3] : null;
    var c = code != null ? code : riqi;
    var u = _url.replace(c, "{0}").replace(dDate, "{1}").replace(sState, "{2}");

    //map.add("http://data.eastmoney.com/stock/lhb.html", "http://wap.eastmoney.com/3g/lhb/");
    //map.add("http://data.eastmoney.com/stock/lhb/{0}.html", "http://wap.eastmoney.com/3g/lhb/stockdetail,{0}.shtml");
    //map.add("http://data.eastmoney.com/stock/lhb/yyb/{0}.html", "http://wap.eastmoney.com/3g/lhb/listyyb,{0}.shtml");
    //map.add("http://data.eastmoney.com/zjlx/detail.html", "http://wap.eastmoney.com/3g/zjlx/");
    //map.add("http://data.eastmoney.com/zjlx/dpzjlx.html", "http://wap.eastmoney.com/3g/zjlx/list,dp.shtml");
    //map.add("http://data.eastmoney.com/bkzj/", "http://wap.eastmoney.com/3g/zjlx/list,bk.shtml");
    //map.add("http://data.eastmoney.com/zjlx/detail.html", "http://wap.eastmoney.com/3g/zjlx/list,gg.shtml");
    //map.add("http://data.eastmoney.com/xg/xg/default.html", "http://wap.eastmoney.com/3g/center/nslist.shtml");
    //map.add("http://data.eastmoney.com/stockcomment/", "http://wap.eastmoney.com/stockcomment/");
    //map.add("http://data.eastmoney.com/tfpxx/", "http://wap.eastmoney.com/3g/tfpxx/");
    //map.add("http://data.eastmoney.com/rzrq/sh.html", "http://m.data.eastmoney.com/rzrq/default.html");
    //map.add("http://data.eastmoney.com/rzrq/detail/{0}.html", "http://m.data.eastmoney.com/rzrq/detail,{0}.html");
    //map.add("http://data.eastmoney.com/bbsj/", "http://m.data.eastmoney.com/nbjb/default.html");
    //map.add("http://data.eastmoney.com/bbsj/{0}/yjbb.html", "http://m.data.eastmoney.com/nbjb/ZXYJ.html");
    //map.add("http://data.eastmoney.com/bbsj/{0}/yjkb/13.html", "http://m.data.eastmoney.com/nbjb/YJKB.html");
    //map.add("http://data.eastmoney.com/bbsj/{0}/yjyg.html", "http://m.data.eastmoney.com/nbjb/YJYG.html");
    //map.add("http://data.eastmoney.com/bbsj/{0}/yjyg.html", "http://m.data.eastmoney.com/nbjb/FPYG.html");
    //map.add("http://data.eastmoney.com/bbsj/{0}.html", "http://m.data.eastmoney.com/nbjb/annual,{0}.html");
    //map.add("http://data.eastmoney.com/dzjy/default.html", "http://m.data.eastmoney.com/dc/dzjy/index.html");
    //map.add("http://data.eastmoney.com/dzjy/detail/{0}.html", "http://m.data.eastmoney.com/DC/DZJY/Stock/{0}.html");


    map.add("/stock/lhb.html", "http://m.data.eastmoney.com/lhb/index.html");//龙虎榜跳转
    map.add("/stock/lhb/{0}.html", "http://m.data.eastmoney.com/lhb/stockdetail/{0}");//龙虎榜详细
    map.add("/stock/lhb/yyb/{0}.html", "http://m.data.eastmoney.com/lhb/sgsearch/{0}");//龙虎榜营业部
    map.add("/zjlx/default.html", "http://m.data.eastmoney.com/zjlx/");//资金流向首页
    map.add("/zjlx/dpzjlx.html", "http://m.data.eastmoney.com/zjlx/list/dp");//资金流向大盘
    map.add("/bkzj/", "http://m.data.eastmoney.com/zjlx/list/bk");//资金流向板块
    map.add("/zjlx/detail.html", "http://m.data.eastmoney.com/zjlx/list/gg");//资金流向个股
    map.add("/xg/xg/default.html", "http://m.data.eastmoney.com/xg/xgsg.html");
    map.add("/xg/xg/default_cm.html", "http://m.data.eastmoney.com/xg/xgsg.html");
    map.add("/xg/xg/calendar.html", "http://m.data.eastmoney.com/xg/index.html");
    map.add("/xg/xg/detail/{0}.html", "http://m.data.eastmoney.com/xg/detail/{0}");
    map.add("/stockcomment/", "http://m.data.eastmoney.com/stockcomment/index/");//
    map.add("/tfpxx/", "http://m.data.eastmoney.com/tfpxx/index");
    map.add("/rzrq/sh.html", "http://m.data.eastmoney.com/rzrq/default.html");
    map.add("/rzrq/detail/{0}.html", "http://m.data.eastmoney.com/rzrq/detail,{0}.html");
    map.add("/bbsj/", "http://m.data.eastmoney.com/nbjb/default.html");
    map.add("/bbsj/{0}/yjbb.html", "http://m.data.eastmoney.com/nbjb/zxyj.html");
    map.add("/bbsj/{0}/yjkb/13.html", "http://m.data.eastmoney.com/nbjb/yjkb.html");
    map.add("/bbsj/{0}/yjyg.html", "http://m.data.eastmoney.com/nbjb/yjyg.html");
    map.add("/bbsj/{0}/yjyg.html", "http://m.data.eastmoney.com/nbjb/fpyg.html");
    map.add("/bbsj/{0}.html", "http://m.data.eastmoney.com/nbjb/annual,{0}.html");
    map.add("/dzjy/default.html", "http://m.data.eastmoney.com/dzjy/index.html");
    map.add("/dzjy/detail/{0}.html", "http://m.data.eastmoney.com/dzjy/stock/{0}.html");
    map.add("/center/", "http://m.data.eastmoney.com/");
    map.add("/zlsj/", "http://m.data.eastmoney.com/zlcc/index");
    map.add("/zlsj/jj.html", "http://m.data.eastmoney.com/zlcc/?stat=1");
    map.add("/zlsj/qfii.html", "http://m.data.eastmoney.com/zlcc/?stat=2");
    map.add("/zlsj/sb.html", "http://m.data.eastmoney.com/zlcc/?stat=3");
    map.add("/zlsj/qs.html", "http://m.data.eastmoney.com/zlcc/?stat=4");
    map.add("/zlsj/bx.html", "http://m.data.eastmoney.com/zlcc/?stat=5");
    map.add("/zlsj/xt.html", "http://m.data.eastmoney.com/zlcc/?stat=6");
    map.add("/zlsj/detail/{1}-{2}-{0}.html", "http://m.data.eastmoney.com/zlcc/detail.aspx?code={0}&dt={1}&stat={2}");
    map.add("/zlsj/jgcg/{1}-{2}-{0}.html", "http://m.data.eastmoney.com/zlcc/CCJJ.aspx?sc={0}&dt={1}&stat={2}");
    map.add("/xuangu/", "http://m.data.eastmoney.com/xuangu?wap=y");
    map.add("/cjrl/default.html", "http://m.data.eastmoney.com/cjrl/index.html");
    //添加新的对应关系开始：--------------------------------------------------------------------------------------------------------------------------------
    //map.add("对象页", "目标页");

    map.add("/", "http://m.data.eastmoney.com/");
    map.add("/xg/xg/dxsyl.html", "http://m.data.eastmoney.com/xg/ssbx");//验证通过
    //新股数据解析：
    //Wap：无
    //Web：http://data.eastmoney.com/xg/xg/chart/fxsyl.html
    //新股上会：
    //Wap：无
    //Web：http://data.eastmoney.com/xg/gh/default.html
    //首发企业信息：
    //Wap：无
    //Web：http://data.eastmoney.com/xg/xg/sbqy.html  
    //沪深港通资金流
    map.add("/hsgt/index.html", "http://m.data.eastmoney.com/hsgt/index.html");//验证通过
    //十大成交股：
    map.add("/hsgt/top10.html", "http://m.data.eastmoney.com/hsgt/topten");//验证通过
    //十大成交股个股明细：
    map.add("/hsgt/{0}.html", "http://m.data.eastmoney.com/hsgt/detail/{0}");//验证通过
    //历史数据：
    //map.add("/hsgt/index.html", "http://m.data.eastmoney.com/hsgt/index.html");
    //涨幅榜：
    //map.add("/hsgt/index.html", "http://m.data.eastmoney.com/hsgt/index.html");
    //全部上榜
    map.add("/stock/tradedetail.html", "http://m.data.eastmoney.com/lhb/tradedetail/1");
    map.add("/stock/tradedetail.html#0", "http://m.data.eastmoney.com/lhb/tradedetail/0");
    //map.add("/stock/tradedetail/{1}.html#0", "http://m.data.eastmoney.com/lhb/tradeDetail/0");
    //沪市上榜：
    map.add("/stock/tradedetail.html#1", "http://m.data.eastmoney.com/lhb/tradedetail/1");
    //深市上榜：
    map.add("/stock/tradedetail.html#2", "http://m.data.eastmoney.com/lhb/tradedetail/2");
    //个股上榜统计：
    map.add("/stock/stockstatistic.html", "http://m.data.eastmoney.com/lhb/stockstatistic");
    //机构买卖情况：
    map.add("/stock/jgmmtj.html", "http://m.data.eastmoney.com/lhb/dailystockliststatistics");
    //机构席位买卖追踪：
    map.add("/stock/jgstatistic.html", "http://m.data.eastmoney.com/lhb/jgstatistic");
    //每日活跃营业部：
    map.add("/stock/hyyyb.html", "http://m.data.eastmoney.com/lhb/activestatistics");
    //营业部回报排行：
    map.add("/stock/yybph.html", "http://m.data.eastmoney.com/lhb/businessranking");
    //营业部上榜统计：
    map.add("/stock/traderstatistic.html", "http://m.data.eastmoney.com/lhb/traderstatistic");
    //营业部查询：
    map.add("/stock/yybcx.html", "http://m.data.eastmoney.com/lhb/inquiryofsales");
    //营业部列表页：
    map.add("/stock/lhb/jg/{0}.html", "http://m.data.eastmoney.com/lhb/inquiryofsalesdetail/{0}");
    //营业部详情（交易明细）：
    map.add("/stock/lhb/yyb/{0}.html", "http://m.data.eastmoney.com/lhb/jgsearch/{0}");
    //营业部详情（营业部风格）：
    map.add("/stock/lhb/yybtj/{0}.html", "http://m.data.eastmoney.com/lhb/tradesearchstatistic/{0}");
    //营业部详情（资金状况）：
    map.add("/stock/lhb/yybzj/{0}.html", "http://m.data.eastmoney.com/lhb/businessstrength/{0}");
    //营业部详情（回测分析）：
    map.add("/stock/lhb/yybhc/{0}.html", "http://m.data.eastmoney.com/lhb/backanalysis/{0}");
    //营业部详情（协同营业部）：
    map.add("/stock/lhb/yybxt/{0}.html", "http://m.data.eastmoney.com/lhb/collaborative/{0}");
    //个股龙虎榜详情（每日成交明细）：
    //map.add("/stock/lhb/{0}.html", "http://m.data.eastmoney.com/lhb/stockdetail/{0}")//同上;
    //个股龙虎榜详情（历次上榜后表现）：
    map.add("/stock/lhb/lcsb/{0}.html", "http://m.data.eastmoney.com/lhb/previousperformance/{0}");
    //个股龙虎榜详情（营业部买卖统计）：
    map.add("/stock/lhb/yybggtj/{0}.html", "http://m.data.eastmoney.com/lhb/businesssalesstatistics/{0}");
    //个股龙虎榜详情（机构买卖统计）：
    map.add("/stock/lhb/ggjgmmtj/{0}.html", "http://m.data.eastmoney.com/lhb/saleseatsstatistics/{0}");
    //个股龙虎榜详情（数据揭秘）：
    map.add("/stock/lhb/datasecret/{0}.html", "http://m.data.eastmoney.com/lhb/datasecret/{0}");
    //大宗交易
    map.add("/dzjy/default.html", "http://m.data.eastmoney.com/dzjy/index");
    //大宗交易个股详情页：
    map.add("/dzjy/detail/{0}.html", "http://m.data.eastmoney.com/dzjy/stock/{0}.html");
    //停复牌
    //map.add("/tfpxx/", "http://m.data.eastmoney.com/tfpxx/index");
    //年报季报首页：
    //map.add("/bbsj/", "http://m.data.eastmoney.com/nbjb/default.html");
    //业绩预告详情：
    map.add("/bbsj/stock{0}.html", "http://m.data.eastmoney.com/nbjb/annual,{0}.html");
    map.add("/bbsj/stock/{0}.html", "http://m.data.eastmoney.com/nbjb/annual,{0}.html");
    //分配预告：
    map.add("/yjfp/", "http://m.data.eastmoney.com/nbjb/fpyg.html");
    //    预约披露时间：
    //map.add("对象页", "目标页");
    //Wap：无
    //Web：http://data.eastmoney.com/bbsj/201609/yysj.html
    //    融资融券
    //融资融券首页：
    //map.add("/rzrq/sh.html", "http://m.data.eastmoney.com/rzrq/default.html");
    //个股融资融券详情：
    map.add("/rzrq/detail/{0}.html", "http://m.data.eastmoney.com/rzrq/detail,{0}.html");
    //主力持仓
    //主力持仓首页：
    //map.add("/zlsj/", "http://m.data.eastmoney.com/zlcc/index");
    //选股器
    //选股器首页：
    //map.add("/xuangu/", "http://m.data.eastmoney.com/xuangu");
    //分红送配
    //分配预告：
    //map.add("/yjfp/", "http://m.data.eastmoney.com/nbjb/FPYG.html");
    //财经日历
    //财经日历首页：
    //map.add("/cjrl/default.html", "http://m.data.eastmoney.com/cjrl/index.html");
    //千股千评
    //千股千评首页：
    //map.add("/stockcomment/", "http://m.data.eastmoney.com/stockcomment/index");
    //千股千评个股页：
    map.add("/stockcomment/{0}.html", "http://m.data.eastmoney.com/stockcomment/{0}.html");
    //Web独有的页面：（web只分全部、深市、沪市；并且链接不变）
    //map.add("对象页", "目标页");
    //全部股票：http://data.eastmoney.com/stockcomment/mkt/0.html
    //沪市A股：http://data.eastmoney.com/stockcomment/mkt/1.html
    //深市A股：http://data.eastmoney.com/stockcomment/mkt/3.html
    //创业板：http://data.eastmoney.com/stockcomment/mkt/6.html
    //中小板：http://data.eastmoney.com/stockcomment/mkt/5.html
    //沪市B股：http://data.eastmoney.com/stockcomment/mkt/2.html
    //深市B股：http://data.eastmoney.com/stockcomment/mkt/4.html
    //资金流向
    //资金流向首页：
    map.add("/zjlx/", "http://m.data.eastmoney.com/zjlx/index");
    //大盘实时资金流向：
    //map.add("/zjlx/dpzjlx.html", "http://m.data.eastmoney.com/zjlx/list/dp");
    //自选股主力资金流向：
    //map.add("对象页", "目标页");
    //Wap：http://wap.eastmoney.com/quoteCenter/stock/favorNew.aspx

    //板块资金流向：
    //map.add("/bkzj/", "http://m.data.eastmoney.com/zjlx/list/bk#hy");
    //个股主力资金流向：
    //map.add("/zjlx/detail.html", "http://m.data.eastmoney.com/zjlx/list/gg");
    //个股详情页：
    map.add("/zjlx/{0}.html", "http://m.data.eastmoney.com/zjlx/stock/{0}");
    //主力净流入排名：
    //Wap：无
    //Web：http://data.eastmoney.com/zjlx/list.html
    //    资金流监测（主力净流入排行）：
    //Wap：无
    //Web：http://data.eastmoney.com/bkzj/jlr.html
    //    资金流监测（主力净流出排行）：
    //Wap：无
    //Web：http://data.eastmoney.com/bkzj/jlc.html
    //    限售解禁
    //限售解禁首页：
    map.add("/dxf/default.html", "http://m.data.eastmoney.com/dxf/index");
    //限售解禁个股详情：
    map.add("/dxf/detail/{0}.html", "http://m.data.eastmoney.com/dxf/detail/{0}");
    //高管持股
    //高管持股首页：
    map.add("/executive/", "http://m.data.eastmoney.com/ggcg/index");
    //高管净增持排行榜：
    map.add("/executive/ranklist_in.html", "http://m.data.eastmoney.com/ggcg/jzc");
    //高管净减持排行榜：
    map.add("/executive/ranklist_out.html", "http://m.data.eastmoney.com/ggcg/jjc");
    //最新变动明细：
    map.add("/executive/list.html", "http://m.data.eastmoney.com/ggcg/zxbdmx");
    //个股变动明细：
    map.add("/executive/{0}.html", "http://m.data.eastmoney.com/ggcg/detail/{0}");
    //高管持仓变动一览：
    map.add("/executive/personinfo.aspx", "http://m.data.eastmoney.com/ggcg/searchdetail");
    //期货龙虎榜
    //期货成交持仓：
    map.add("/futures/sh/data.html", "http://m.data.eastmoney.com/futures/cjcc/if");
    //期货公司持仓结构：
    map.add("/futures/sh/position.html", "http://m.data.eastmoney.com/futures/ccjg/");
    //沪港通资金流
    map.add("/bkzj/hgt.html", "http://m.data.eastmoney.com/hsgt/index");
    //公告大全
    map.add("/notices/", "http://m.data.eastmoney.com/notices/");
    map.add("/notices/{0}.html", "http://m.data.eastmoney.com/notices/{0}");
    map.add("/notices/stock/{0}.html", "http://m.data.eastmoney.com/notices/stock/{0}");
    //分红送配
    map.add("/yjfp/", "http://m.data.eastmoney.com/fhsp/");
    map.add("/yjfp/{0}.html", "http://m.data.eastmoney.com/fhsp/{0}");
    map.add("/yjfp/detail/{0}.html", "http://m.data.eastmoney.com/fhsp/stock/{0}");
    //结束
    map.ByCheck(u, c);
})(window);